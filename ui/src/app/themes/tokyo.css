/* === Tokyo Night — Neon Overdrive ======================================== */
/* Palette (base sombre + néons violet/rouge) */
:root {
  --color-bg: #0b0e14;
  --color-surface: #171726;         /* cartes/panels */
  --color-surface-muted: #1f2033;   /* hover / intercalaires */
  --color-border: #2a2f45;

  --color-text: #c0caf5;
  --color-text-muted: #a9b1d6;

  --color-primary: #bb9af7;         /* violet */
  --color-secondary: #f7768e;       /* rouge néon */
  --color-accent: #8bd5ff;          /* cyan discret */

  --color-success: #9ece6a;
  --color-warning: #e0af68;
  --color-danger:  #f7768e;

  /* Glows */
  --glow-weak:   0 0 22px rgba(187,154,247,.20);
  --glow-strong: 0 0 42px rgba(187,154,247,.38);

  color-scheme: dark;
}

/* Fond global : halos directionnels + très léger grain */
html, body { background-color: var(--color-bg); color: var(--color-text); }
::selection { background: rgba(187,154,247,.28); color: var(--color-text); }

body.theme-tokyo {
  background:
    radial-gradient(1200px 800px at 80% -10%, rgba(187,154,247,.13), transparent),
    radial-gradient(900px 600px at -10% 20%, rgba(247,118,142,.09), transparent),
    linear-gradient(180deg, rgba(20,18,30,.35) 0%, rgba(11,14,20,0) 35%),
    var(--color-bg);
}

/* Scrollbars fins */
* { scrollbar-width: thin; scrollbar-color: var(--color-border) transparent; }
*::-webkit-scrollbar { height: 8px; width: 8px; }
*::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: 9999px; }

/* === Typo / Titres ======================================================== */
.neon-title {
  background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 16px rgba(187,154,247,.25);
}

/* Liens */
a { color: var(--color-accent); text-decoration: none; }
a:hover { color: var(--color-secondary); text-decoration: underline; }

/* === Boutons ============================================================== */
.btn {
  background: color-mix(in oklab, var(--color-primary) 85%, #000);
  color: #0b0e14;
  padding: .6rem 1.1rem;
  font-weight: 600;
  border-radius: .7rem;
  border: 1px solid color-mix(in oklab, var(--color-primary) 35%, var(--color-border));
  transition: .18s ease;
  box-shadow: var(--glow-weak);
}
.btn:hover {
  background: var(--color-secondary);
  border-color: var(--color-secondary);
  box-shadow: var(--glow-strong);
  transform: translateY(-1px);
}
.btn-ghost {
  background: transparent;
  color: var(--color-primary);
  border: 1px solid var(--color-border);
}
.btn-ghost:hover {
  background: color-mix(in oklab, var(--color-primary) 12%, transparent);
}

/* === Panneaux / Cards ===================================================== */
.panel {
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--color-surface) 94%, transparent),
    color-mix(in oklab, var(--color-surface) 88%, transparent)
  );
  border: 1px solid var(--color-border);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 12%, transparent),
    0 18px 54px -24px rgba(187,154,247,.26);
  transition: border-color .22s ease, box-shadow .22s ease, transform .22s ease;
}
.panel:hover {
  border-color: color-mix(in oklab, var(--color-primary) 50%, var(--color-border));
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 22%, transparent),
    0 24px 70px -26px rgba(187,154,247,.32);
  transform: translateY(-1px);
}

/* Version XL (hero) avec léger overlay */
.panel-xl {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 14%, transparent),
    0 26px 86px -32px rgba(187,154,247,.30);
  position: relative;
}
.panel-xl::after {
  /* liseré bas violet/rouge très discret */
  content: "";
  position: absolute;
  inset-inline: 0;
  bottom: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent, var(--color-primary), var(--color-secondary), transparent);
  opacity: .35;
}

/* Petite pastille couleur (banques) */
.bank-dot {
  box-shadow: 0 0 0 1px rgba(255,255,255,.08), 0 0 12px rgba(187,154,247,.22);
}

/* Anneau discret avatars */
.theme-tokyo .avatar-ring {
  border: 1px solid var(--color-border);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 18%, transparent),
    0 6px 22px -10px rgba(122,162,247,.25);
}

/* === Table ================================================================ */
.table-default thead th {
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--color-surface) 96%, transparent),
                           color-mix(in oklab, var(--color-surface) 88%, transparent));
  color: var(--color-text);
  position: sticky; top: 0; z-index: 5; /* si conteneur scrollable */
}
.table-default tbody tr { transition: background .18s ease; }
.table-default tbody tr:hover {
  background:
    linear-gradient(90deg,
      color-mix(in oklab, var(--color-primary) 10%, transparent),
      color-mix(in oklab, var(--color-secondary) 10%, transparent)
    ),
    var(--color-surface-muted);
}

/* Badge générique pour rappels */
.badge-neon {
  background: linear-gradient(90deg, var(--color-secondary), color-mix(in oklab, var(--color-secondary) 70%, #000));
  color: #0b0e14;
  border: 1px solid color-mix(in oklab, var(--color-secondary) 60%, var(--color-border));
  box-shadow: 0 0 0 1px rgba(247,118,142,.25), 0 0 24px rgba(247,118,142,.35);
}

/* === Navbar “glass” ======================================================= */
.glass-nav {
  position: sticky;
  top: .5rem;
  background: color-mix(in oklab, var(--color-surface) 86%, transparent);
  border: 1px solid var(--color-border);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 12%, transparent),
    0 14px 46px -20px rgba(187,154,247,.24);
  backdrop-filter: blur(8px);
}

/* Soulignement néon liens nav */
.neon-underline { position: relative; }
.neon-underline::after {
  content: "";
  position: absolute;
  left: .9rem; right: .9rem; bottom: .35rem; height: 2px;
  background: linear-gradient(90deg, var(--color-secondary), var(--color-primary), transparent 70%);
  opacity: 0; transform: translateY(4px);
  transition: .22s ease;
  border-radius: 9999px;
}
.neon-underline:hover::after { opacity: .95; transform: translateY(0); }

/* === “Pill buttons” (filtres) ============================================ */
.pill-btn {
  border-color: var(--color-border);
  background: color-mix(in oklab, var(--color-surface) 84%, transparent);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
.pill-btn:hover {
  border-color: color-mix(in oklab, var(--color-primary) 55%, var(--color-border));
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--color-primary) 14%, var(--color-surface)),
      color-mix(in oklab, var(--color-primary) 10%, var(--color-surface))
    );
}

/* === Utilitaires ========================================================== */
.text-muted-foreground { color: var(--color-text-muted); }
.bg-surface { background: var(--color-surface); }
.bg-card { background: color-mix(in oklab, var(--color-surface) 96%, #000); }
.border-border { border-color: var(--color-border); }

/* === (Optionnel) Contours animés — à appliquer manuellement ============== */
/* Ajoute la classe .neon-border à un bloc pour un liseré pulsé */
@keyframes neonPulse {
  0%, 100% { box-shadow: 0 0 0 1px rgba(187,154,247,.28), 0 0 24px rgba(187,154,247,.24); }
  50%      { box-shadow: 0 0 0 1px rgba(247,118,142,.34), 0 0 32px rgba(247,118,142,.32); }
}
.neon-border {
  animation: neonPulse 2.5s ease-in-out infinite;
  border-radius: 1rem;
}
/* --- Popover (filters) animated open/close --- */
@keyframes popIn {
  0%   { opacity: 0; transform: translateY(6px) scale(0.98); }
  100% { opacity: 1; transform: translateY(0)    scale(1); }
}
@keyframes popOut {
  0%   { opacity: 1; transform: translateY(0)    scale(1); }
  100% { opacity: 0; transform: translateY(4px) scale(0.98); }
}

/* Radix ajoute data-state="open|closed" sur le Content */
.pop-anim[data-state="open"]   { animation: popIn 160ms cubic-bezier(.22,.9,.34,1) forwards; }
.pop-anim[data-state="closed"] { animation: popOut 120ms ease forwards; }

/* Skin du menu (verre + halo léger) */
.neon-dropdown {
  background: color-mix(in oklab, var(--color-surface) 92%, transparent);
  border: 1px solid var(--color-border);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 12%, transparent),
    0 18px 44px -22px rgba(187,154,247,.26);
  backdrop-filter: blur(8px);
  border-radius: 14px;
  overflow: hidden;
}

/* Trigger visuel quand le popover est ouvert */
.pill-btn[aria-expanded="true"] {
  border-color: color-mix(in oklab, var(--color-primary) 60%, var(--color-border));
  box-shadow: var(--glow-weak);
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--color-primary) 14%, var(--color-surface)),
      color-mix(in oklab, var(--color-primary) 10%, var(--color-surface))
    );
}
/* entrée des items quand le menu s'ouvre */
@keyframes itemIn {
  0%   { opacity: 0; transform: translateY(6px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* tous les items dans un popover "ouvert" sont animés */
.pop-anim[data-state="open"] .menu-item {
  opacity: 0;
  animation: itemIn 180ms cubic-bezier(.22,.9,.34,1) forwards;
}

/* petit stagger progressif (jusqu’à 12 éléments, ajuste si besoin) */
.pop-anim[data-state="open"] .menu-item:nth-child(1)  { animation-delay: 20ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(2)  { animation-delay: 40ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(3)  { animation-delay: 60ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(4)  { animation-delay: 80ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(5)  { animation-delay: 100ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(6)  { animation-delay: 120ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(7)  { animation-delay: 140ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(8)  { animation-delay: 160ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(9)  { animation-delay: 180ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(10) { animation-delay: 200ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(11) { animation-delay: 220ms; }
.pop-anim[data-state="open"] .menu-item:nth-child(12) { animation-delay: 240ms; }

/* hover: léger glow + “barre” verticale qui pousse, no JS */
.menu-item {
  position: relative;
  border-radius: 10px;
  transition: background .18s ease, transform .18s ease, box-shadow .18s ease;
}
.menu-item:hover {
  background:
    linear-gradient(90deg,
      color-mix(in oklab, var(--color-primary) 10%, transparent),
      color-mix(in oklab, var(--color-secondary) 10%, transparent)
    );
  transform: translateY(-1px);
  box-shadow: 0 10px 28px -18px rgba(187,154,247,.25);
}
.menu-item:active { transform: translateY(0); }

/* petite barre qui s’étire à gauche au hover */
.menu-item::before {
  content: "";
  position: absolute;
  left: 6px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 0;
  background: linear-gradient(var(--color-secondary), var(--color-primary));
  border-radius: 2px;
  transition: height .18s ease;
  opacity: .9;
}
.menu-item:hover::before { height: 70%; }
/* === PRO MODE OVERRIDES ===================================== */

/* Rayon unifié (plus “app” que “gamified”) */
:root {
  --pro-radius: 12px;
}
.panel, .panel-xl, .bg-surface, .bg-card { border-radius: var(--pro-radius); }
.btn { border-radius: calc(var(--pro-radius) - 2px); }
.pill-btn { border-radius: calc(var(--pro-radius) - 4px); }

/* Logo titre un peu moins “néon” */
.neon-title { text-shadow: 0 0 8px rgba(187,154,247,.18); }

/* Panels plus sobres (moins de glow/hover) */
.panel {
  box-shadow:
    0 12px 44px -28px rgba(0,0,0,.55),
    0 0 0 1px color-mix(in oklab, var(--color-primary) 10%, transparent);
}
.panel:hover {
  transform: none;
  box-shadow:
    0 14px 54px -30px rgba(0,0,0,.6),
    0 0 0 1px color-mix(in oklab, var(--color-primary) 18%, transparent);
}

.panel-xl {
  box-shadow:
    0 18px 64px -34px rgba(0,0,0,.6),
    0 0 0 1px color-mix(in oklab, var(--color-primary) 10%, transparent);
}
.panel-xl::after { opacity: .18; }

/* Header de table = sticky + séparation nette, très “produit” */
.table-default thead th {
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--color-border);
  box-shadow: 0 1px 0 rgba(255,255,255,.04), 0 8px 22px -18px rgba(0,0,0,.6);
}
.table-default tbody tr:hover {
  /* hover plus sobre (moins de teinte) */
  background: color-mix(in oklab, var(--color-surface-muted) 90%, transparent);
}

/* Pastilles banque: halo plus discret */
.bank-dot { box-shadow: 0 0 0 1px rgba(255,255,255,.06), 0 0 10px rgba(187,154,247,.18); }

/* Boutons: pas de translation/halo agressif */
.btn { box-shadow: none; }
.btn:hover { box-shadow: none; transform: none; }
.btn-ghost:hover { background: color-mix(in oklab, var(--color-primary) 8%, transparent); }

/* Badges d’alerte moins flashy */
.badge-neon {
  background: linear-gradient(90deg,
    color-mix(in oklab, var(--color-secondary) 84%, #000),
    var(--color-secondary));
  border-color: color-mix(in oklab, var(--color-secondary) 50%, var(--color-border));
  box-shadow: none;
}

/* Navbar “glass” un poil plus net */
.glass-nav{
  background: color-mix(in oklab, var(--color-surface) 92%, transparent);
  box-shadow:
    0 10px 36px -22px rgba(0,0,0,.5),
    0 0 0 1px color-mix(in oklab, var(--color-primary) 10%, transparent);
}

/* Focus visible (a11y pro) – clavier/démo en amphi */
:where(a,button,[role="button"],input,select,textarea):focus-visible{
  outline: 2px solid color-mix(in oklab, var(--color-accent) 70%, var(--color-primary));
  outline-offset: 2px;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-accent) 20%, transparent);
  border-radius: 10px;
}

/* Option densité compacte pour les tableaux (si tu veux) */
.table-compact .table-default td { padding-top: .5rem; padding-bottom: .5rem; }
