/* ========================================================================
   TOKYO NIGHT — NEON OVERDRIVE (DARK THEME)
   Scopé via :root:not([data-theme="light"])
   ======================================================================== */
:root:not([data-theme="light"]) {
  /* === Couleurs principales === */
  --color-bg: #0b0e14;
  --color-surface: #171726;
  --color-surface-muted: #1f2033;
  --color-border: #2a2f45;
  --color-text: #c0caf5;
  --color-text-muted: #a9b1d6;
  --color-primary: #bb9af7;
  --color-secondary: #f7768e;
  --color-accent: #8bd5ff;

  /* === Glow / Neon === */
  --glow-weak: 0 0 22px rgba(187,154,247,.20);
  --glow-strong: 0 0 42px rgba(187,154,247,.38);
  --neon-shadow-rest:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 12%, transparent),
    0 18px 54px -24px rgba(187,154,247,.26);
  --neon-shadow-hover:
    0 0 0 1px color-mix(in oklab, var(--color-primary) 22%, transparent),
    0 24px 70px -26px rgba(187,154,247,.32);

  /* === Gradients === */
  --progress-gradient: linear-gradient(90deg, var(--color-secondary), var(--color-primary));

  /* === Hero Background === */
  --hero-scrim:
    radial-gradient(60% 120% at 80% -20%, rgba(187,154,247,.18), transparent),
    radial-gradient(60% 120% at 0% 40%, rgba(247,118,142,.14), transparent),
    linear-gradient(180deg, rgba(11,14,20,.30), transparent 40%, rgba(11,14,20,.55) 100%);
  --hero-media-filter: none;

  /* === Color scheme pour le navigateur === */
  color-scheme: dark;

  /* === Compatibilité shadcn/ui (tokens foreground/background) === */
  --background: var(--color-bg);
  --foreground: var(--color-text);
  --card: var(--color-surface);
  --card-foreground: var(--color-text);
  --popover: var(--color-surface);
  --popover-foreground: var(--color-text);
  --muted-foreground: var(--color-text-muted);
  --border: var(--color-border);
}

/* === Sécurités anti "texte noir" en dark === */
:root:not([data-theme="light"])
  [class*="text-black"],
:root:not([data-theme="light"])
  [class*="text-gray-900"],
:root:not([data-theme="light"])
  [class*="text-gray-800"],
:root:not([data-theme="light"])
  [class*="text-slate-900"],
:root:not([data-theme="light"])
  [class*="text-slate-800"],
:root:not([data-theme="light"])
  [class*="text-neutral-900"],
:root:not([data-theme="light"])
  [class*="text-neutral-800"],
:root:not([data-theme="light"])
  [class*="text-zinc-900"],
:root:not([data-theme="light"])
  [class*="text-zinc-800"],
:root:not([data-theme="light"])
  [class*="text-stone-900"],
:root:not([data-theme="light"])
  [class*="text-stone-800"] {
  color: var(--color-text) !important;
}

/* bg-white → surface dark */
:root:not([data-theme="light"]) .bg-white {
  background-color: var(--color-surface) !important;
  color: var(--color-text) !important;
}

/* === Tableaux (géométrie stable, pas de ligne manquante) === */
.table-default {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
}
.table-default th,
.table-default td {
  border-bottom: 1px solid var(--color-border);
  padding: 0.75rem 1rem;
  color: var(--color-text);
}
.table-default tbody tr:last-child th,
.table-default tbody tr:last-child td {
  border-bottom: 1px solid var(--color-border);
}
.table-default tr { display: table-row; }
.table-default td, .table-default th { display: table-cell; }

/* Hover stable (sans casser la border) */
.table-default tbody tr:hover {
  background:
    linear-gradient(90deg,
      color-mix(in oklab,var(--color-primary) 10%,transparent),
      color-mix(in oklab,var(--color-secondary) 10%,transparent)
    ),
    var(--color-surface-muted);
}

/* === Divers === */
button, .btn {
  background-color: var(--color-surface-muted);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  box-shadow: var(--neon-shadow-rest);
  transition: all 0.25s ease;
}
button:hover, .btn:hover {
  box-shadow: var(--neon-shadow-hover);
  transform: translateY(-1px);
}
